"use strict";
var vg_scrub_bar_current_time_1 = require("./vg-scrub-bar-current-time");
var vg_api_1 = require("../../../services/vg-api");
describe('Scrub bar current time', function () {
    var scrubBarCurrentTime;
    var ref;
    var api;
    beforeEach(function () {
        ref = {
            nativeElement: {
                getAttribute: function (name) {
                    return name;
                }
            }
        };
        api = new vg_api_1.VgAPI();
        scrubBarCurrentTime = new vg_scrub_bar_current_time_1.VgScrubBarCurrentTime(ref, api);
    });
    it('Should get media by id on init', function () {
        spyOn(scrubBarCurrentTime.elem, 'getAttribute').and.callThrough();
        spyOn(api, 'getMediaById');
        scrubBarCurrentTime.onPlayerReady();
        expect(scrubBarCurrentTime.elem.getAttribute).toHaveBeenCalledWith('vg-for');
        expect(api.getMediaById).toHaveBeenCalledWith('vg-for');
    });
    describe('getPercentage', function () {
        it('should return 50% when current time is 10 and total time is 20', function () {
            scrubBarCurrentTime.target = {
                time: {
                    current: 10,
                    total: 20
                }
            };
            var percent = scrubBarCurrentTime.getPercentage();
            expect(percent).toEqual('50%');
        });
        it('should return 25% when current time is 5 and total time is 20', function () {
            scrubBarCurrentTime.target = {
                time: {
                    current: 5,
                    total: 20
                }
            };
            var percent = scrubBarCurrentTime.getPercentage();
            expect(percent).toEqual('25%');
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmctc2NydWItYmFyLWN1cnJlbnQtdGltZS5zcGVjLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidmctc2NydWItYmFyLWN1cnJlbnQtdGltZS5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSwwQ0FBb0MsNkJBQTZCLENBQUMsQ0FBQTtBQUNsRSx1QkFBb0IsMEJBQTBCLENBQUMsQ0FBQTtBQUcvQyxRQUFRLENBQUMsd0JBQXdCLEVBQUU7SUFDL0IsSUFBSSxtQkFBMEMsQ0FBQztJQUMvQyxJQUFJLEdBQWMsQ0FBQztJQUNuQixJQUFJLEdBQVMsQ0FBQztJQUVkLFVBQVUsQ0FBQztRQUNQLEdBQUcsR0FBRztZQUNGLGFBQWEsRUFBRTtnQkFDWCxZQUFZLEVBQUUsVUFBQyxJQUFJO29CQUNmLE1BQU0sQ0FBQyxJQUFJLENBQUM7Z0JBQ2hCLENBQUM7YUFDSjtTQUNKLENBQUM7UUFFRixHQUFHLEdBQUcsSUFBSSxjQUFLLEVBQUUsQ0FBQztRQUVsQixtQkFBbUIsR0FBRyxJQUFJLGlEQUFxQixDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUM5RCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRTtRQUNqQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsSUFBSSxFQUFFLGNBQWMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNsRSxLQUFLLENBQUMsR0FBRyxFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBRTNCLG1CQUFtQixDQUFDLGFBQWEsRUFBRSxDQUFDO1FBRXBDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsb0JBQW9CLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDN0UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM1RCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxlQUFlLEVBQUU7UUFDdEIsRUFBRSxDQUFDLGdFQUFnRSxFQUFFO1lBQ2pFLG1CQUFtQixDQUFDLE1BQU0sR0FBRztnQkFDekIsSUFBSSxFQUFFO29CQUNGLE9BQU8sRUFBRSxFQUFFO29CQUNYLEtBQUssRUFBRSxFQUFFO2lCQUNaO2FBQ0osQ0FBQztZQUVGLElBQUksT0FBTyxHQUFHLG1CQUFtQixDQUFDLGFBQWEsRUFBRSxDQUFDO1lBRWxELE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsK0RBQStELEVBQUU7WUFDaEUsbUJBQW1CLENBQUMsTUFBTSxHQUFHO2dCQUN6QixJQUFJLEVBQUU7b0JBQ0YsT0FBTyxFQUFFLENBQUM7b0JBQ1YsS0FBSyxFQUFFLEVBQUU7aUJBQ1o7YUFDSixDQUFDO1lBRUYsSUFBSSxPQUFPLEdBQUcsbUJBQW1CLENBQUMsYUFBYSxFQUFFLENBQUM7WUFFbEQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1ZnU2NydWJCYXJDdXJyZW50VGltZX0gZnJvbSBcIi4vdmctc2NydWItYmFyLWN1cnJlbnQtdGltZVwiO1xuaW1wb3J0IHtWZ0FQSX0gZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL3ZnLWFwaVwiO1xuaW1wb3J0IHtFbGVtZW50UmVmfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuXG5kZXNjcmliZSgnU2NydWIgYmFyIGN1cnJlbnQgdGltZScsICgpID0+IHtcbiAgICBsZXQgc2NydWJCYXJDdXJyZW50VGltZTogVmdTY3J1YkJhckN1cnJlbnRUaW1lO1xuICAgIGxldCByZWY6RWxlbWVudFJlZjtcbiAgICBsZXQgYXBpOlZnQVBJO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIHJlZiA9IHtcbiAgICAgICAgICAgIG5hdGl2ZUVsZW1lbnQ6IHtcbiAgICAgICAgICAgICAgICBnZXRBdHRyaWJ1dGU6IChuYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBhcGkgPSBuZXcgVmdBUEkoKTtcblxuICAgICAgICBzY3J1YkJhckN1cnJlbnRUaW1lID0gbmV3IFZnU2NydWJCYXJDdXJyZW50VGltZShyZWYsIGFwaSk7XG4gICAgfSk7XG5cbiAgICBpdCgnU2hvdWxkIGdldCBtZWRpYSBieSBpZCBvbiBpbml0JywgKCkgPT4ge1xuICAgICAgICBzcHlPbihzY3J1YkJhckN1cnJlbnRUaW1lLmVsZW0sICdnZXRBdHRyaWJ1dGUnKS5hbmQuY2FsbFRocm91Z2goKTtcbiAgICAgICAgc3B5T24oYXBpLCAnZ2V0TWVkaWFCeUlkJyk7XG5cbiAgICAgICAgc2NydWJCYXJDdXJyZW50VGltZS5vblBsYXllclJlYWR5KCk7XG5cbiAgICAgICAgZXhwZWN0KHNjcnViQmFyQ3VycmVudFRpbWUuZWxlbS5nZXRBdHRyaWJ1dGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd2Zy1mb3InKTtcbiAgICAgICAgZXhwZWN0KGFwaS5nZXRNZWRpYUJ5SWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd2Zy1mb3InKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdnZXRQZXJjZW50YWdlJywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiA1MCUgd2hlbiBjdXJyZW50IHRpbWUgaXMgMTAgYW5kIHRvdGFsIHRpbWUgaXMgMjAnLCAoKSA9PiB7XG4gICAgICAgICAgICBzY3J1YkJhckN1cnJlbnRUaW1lLnRhcmdldCA9IHtcbiAgICAgICAgICAgICAgICB0aW1lOiB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ6IDEwLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogMjBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZXQgcGVyY2VudCA9IHNjcnViQmFyQ3VycmVudFRpbWUuZ2V0UGVyY2VudGFnZSgpO1xuXG4gICAgICAgICAgICBleHBlY3QocGVyY2VudCkudG9FcXVhbCgnNTAlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIDI1JSB3aGVuIGN1cnJlbnQgdGltZSBpcyA1IGFuZCB0b3RhbCB0aW1lIGlzIDIwJywgKCkgPT4ge1xuICAgICAgICAgICAgc2NydWJCYXJDdXJyZW50VGltZS50YXJnZXQgPSB7XG4gICAgICAgICAgICAgICAgdGltZToge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50OiA1LFxuICAgICAgICAgICAgICAgICAgICB0b3RhbDogMjBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZXQgcGVyY2VudCA9IHNjcnViQmFyQ3VycmVudFRpbWUuZ2V0UGVyY2VudGFnZSgpO1xuXG4gICAgICAgICAgICBleHBlY3QocGVyY2VudCkudG9FcXVhbCgnMjUlJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXX0=